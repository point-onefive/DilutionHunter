# DilutionHunter v2.2 ‚Äî Tweet Quality & Financial Evidence Update

**Date:** November 28, 2025  
**Status:** Production  
**Version:** 2.2  

---

## Summary

Major improvements to tweet generation quality, adding financial evidence from balance sheets and cash flow statements, and improved formatting for readability.

---

## Key Changes

### 1. Financial Health Data Integration

Added real-time financial health fetching from FMP API:

**New Data Points:**
| Metric | Source | Example |
|--------|--------|---------|
| Cash on Hand | Balance Sheet | $300K |
| Total Debt | Balance Sheet | $8.1M |
| Monthly Burn Rate | Cash Flow Statement | $2.0M/month |
| Months of Cash Left | Calculated | < 1 month |
| Distress Level | Calculated | critical/severe/moderate/low |
| Burn Trend | Quarter-over-quarter | accelerating/stable/improving |

**API Endpoints Used:**
- `/stable/balance-sheet-statement` ‚Äî Cash, debt, assets
- `/stable/cash-flow-statement` ‚Äî Operating cash flow, burn rate

**Distress Level Calculation:**
```
< 3 months of cash  ‚Üí critical
< 6 months of cash  ‚Üí severe  
< 12 months of cash ‚Üí moderate
12+ months of cash  ‚Üí low
```

### 2. Dynamic Narrative Generation

Tweets now include a **one-sentence narrative** that varies based on:
- **Bucket type** (ACTIONABLE, WATCH_LIST, CASE_STUDY)
- **Ticker-specific metrics** (cash, burn, runway, spike %, pullback)

**Narrative Examples by Bucket:**

**ACTIONABLE:**
> "With < 1 month of cash left and a fresh ATM, the ingredients for dilution are live."

**WATCH_LIST:**
> "Conditions forming that often precede dilution ‚Äî not confirmed, but tracking."

**CASE_STUDY:**
> "This chart shows how dilution unfolded ‚Äî useful blueprint for future setups."

### 3. Formatting Improvements

| Before | After |
|--------|-------|
| `1/ What's an ATM?` | `1Ô∏è‚É£ What's an ATM?` |
| `2/ The setup...` | `2Ô∏è‚É£ The setup...` |
| `Full breakdown below ‚Üì` | `üßµ Full breakdown below` |
| `Runway: < 1 month` | `< 1 month of cash left` |

### 4. Character Limits Removed

Twitter/X now allows longer posts for paid accounts. Removed all 280-character restrictions:
- Alert tweets can be longer for complete narratives
- Thread tweets can include full explanations
- No more truncated content

### 5. Hashtags Removed

Hashtags permanently removed from all generated content. No longer valuable for engagement.

### 6. Model Upgrade

Upgraded from `gpt-4o` to `gpt-5.1` for improved content quality.
- Changed parameter from `max_tokens` to `max_completion_tokens` (gpt-5.1 requirement)

---

## Updated Tweet Structure

### Alert Tweet (First Tweet with Chart)
```
üö® $TICKER dilution watch

+X% spike off lows, now holding +Y%
ATM filed YYYY-MM-DD
$XM cap with < X months of cash left

[ONE-SENTENCE NARRATIVE specific to this ticker's situation]

üßµ Full breakdown below
```

### Thread Tweets
```
1Ô∏è‚É£ What's an ATM?
[Direct explanation ‚Äî no analogies]

2Ô∏è‚É£ The setup on $TICKER:
‚Ä¢ Market cap: $XM
‚Ä¢ ATM filed: YYYY-MM-DD
‚Ä¢ Price: +X% peak ‚Üí now +Y%
‚Ä¢ Cash: $XK
‚Ä¢ Burn: $X.XM/month
‚Ä¢ X months of cash left

3Ô∏è‚É£ What I'm watching:
‚Ä¢ Heavy red candle with volume
‚Ä¢ Selling pressure growing
‚Ä¢ Support breaks that don't bounce
‚Ä¢ Already X% off highs
Motive clear: [distress level] distress

4Ô∏è‚É£ Scenarios:
Bear builds if: [specific conditions]
Bull invalidation: [specific conditions]
Traders get trapped when dilution hits during pullbacks, not the run.

5Ô∏è‚É£ Takeaway on $TICKER:
[Bucket-specific framing + company-specific metrics]
Not advice ‚Äî pattern recognition only. ü¶Ö
```

---

## Files Modified

| File | Changes |
|------|---------|
| `src/contentPipeline.js` | Added `fetchFinancialHealth()`, dynamic narratives, emoji formatting, removed char limits |
| `src/post.js` | Removed 280-char validation blocking |
| `src/twitterPoster.js` | No changes (DRY_RUN logic unchanged) |

---

## Configuration

No new environment variables required. Uses existing `FMP_API_KEY` for balance sheet/cash flow data.

---

## Usage

```bash
# Generate content with financial data
node src/contentPipeline.js TICKER --force

# Post to Twitter (live)
DRY_RUN=false node src/post.js TICKER
```

---

## Example Output

**$AMZE Alert Tweet:**
```
üö® $AMZE dilution watch

+91% spike off lows, now holding +47%
ATM filed 2025-11-13
$2.8M cap with < 1 month of cash left

Company has ~$300K cash vs ~$2.0M monthly burn and $8.1M debt, 
so the ATM is a survival tool, not optional.

üßµ Full breakdown below
```

**Thread Tweet 2:**
```
2Ô∏è‚É£ The setup on $AMZE:
‚Ä¢ Market cap: ~$2.8M
‚Ä¢ ATM filed: 2025-11-13
‚Ä¢ Price: ran +91% off lows ‚Üí now +47%
‚Ä¢ Cash: $300K
‚Ä¢ Burn: ~$2.0M/month
‚Ä¢ < 1 month of cash left
‚Ä¢ Debt: ~$8.1M

High price + emergency cash need + active ATM = classic dilution setup risk.
```

---

## Next Steps

- [ ] Re-enable GitHub Actions scheduled runs once satisfied with output
- [ ] Add historical performance tracking (did our alerts precede drops?)
- [ ] Consider Discord webhook integration for alerts
